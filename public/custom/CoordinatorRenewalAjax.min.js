$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t="/coordinator/renewal",e="",a=$("#table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:{type:"POST",url:dataurl,data:function(t){t.status=$("#status").val()}},columnDefs:[{width:"200px",targets:3},{width:"130px",targets:2},{width:"130px",targets:1}],columns:[{data:"strStudName",name:"strStudName"},{data:"withdraw",name:"withdraw",orderable:!1,searchable:!1},{data:"drop",name:"drop",orderable:!1,searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#list").on("click",".btn-accept",function(){e=$(this).val(),swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Accept",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(n){setTimeout(function(){n&&($.get(t+"/accept/"+e,function(t){a.draw(),swal({title:"Accepted!",text:"<center>Student Accepted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})}).fail(function(t){swal({title:"Failed!",text:"<center>No Available Slot</center>",type:"error",confirmButtonClass:"btn-success",showConfirmButton:!0,html:!0})}),$.get("/coordinator/budget/getlatest",function(t){$(".slot").text(t.slot_count),$(".budget").text(t.amount)}))},500)})}),$("#list").on("click",".btn-decline",function(){$("#btn-save").val($(this).val()),$("#frm").trigger("reset"),$("#message").modal("show")}),$("#message").on("hide.bs.modal",function(){$("#frm").parsley().destroy(),$("#frm").trigger("reset")}),$("#btn-save").click(function(){if($("#frm").parsley().destroy(),$("#frm").parsley().isValid()){$("#btn-save").attr("disabled","disabled"),setTimeout(function(){$("#btn-save").removeAttr("disabled")},1e3);var e={title:$("#title").val(),description:$("#description").val()},n=t+"/decline/"+$("#btn-save").val();$.ajax({type:"POST",url:n,data:e,dataType:"json",success:function(t){$("#message").modal("hide"),a.draw(),swal({title:"Declined!",text:"<center>Student Declined</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0})},error:function(t){$.notify({icon:"fa fa-warning",message:t.responseText.replace(/['"]+/g,"")},{type:"warning",z_index:2e3,delay:5e3})}})}}),$("#status").change(function(){a.draw()}),$("#cri").click(function(){$("#criteria").modal("show")})});