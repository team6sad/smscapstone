$(document).ready(function(){function e(){swal({title:"Record Deleted!",type:"warning",text:"<center>Refresh Records?</center>",html:!0,showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Refresh",cancelButtonText:"Cancel",closeOnConfirm:!0,allowOutsideClick:!0,closeOnCancel:!0},function(e){e&&a.draw()})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t="/admin/grade",a=$("#grade-table").DataTable({responsive:!0,processing:!0,serverSide:!0,ajax:dataurl,columnDefs:[{width:"180px",targets:2},{width:"70px",targets:1}],columns:[{data:"description",name:"description"},{data:"is_active",name:"is_active",searchable:!1},{data:"action",name:"action",orderable:!1,searchable:!1}]});$("#grade-list").on("change","#isActive",function(){var t=$(this).val(),a=0;if($(this).prop("checked"))a=1;var n={is_active:a};$.ajax({url:"/admin/grade/checkbox/"+t,type:"PUT",data:n,success:function(t){Pace.restart(),"Deleted"==t&&e()},error:function(e){}})}),$("#grade-list").on("click",".btn-view",function(){$.get(t+"/"+$(this).val(),function(e){var t="<div class='row'><div class='form-group col-md-12'><label>Description:</label> "+e[0].description+"</div><div class='row'>";$.each(e,function(e,a){var n="Failed";"P"==a.status?n="Passed":"D"==a.status?n="Drop":"W"==a.status&&(n="Withdraw"),t+="<div class='form-group col-md-6'><div class='col-md-6'><label>Grade:</label> "+a.grade+"</div><div class='col-md-6'><label>Status:</label> "+n+"</div></div>"}),bootbox.alert({message:t,backdrop:!0,buttons:{ok:{label:"Ok",className:"btn-success btn-md"}}})})}),$("#grade-list").on("click",".btn-delete",function(){var n=$(this).val();swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-danger",confirmButtonText:"Delete",cancelButtonText:"Cancel",closeOnConfirm:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0,closeOnCancel:!0},function(s){setTimeout(function(){s&&$.ajax({url:t+"/"+n,type:"DELETE",success:function(t){"Deleted"==t?e():"true"==t[0]?swal({title:"Failed!",text:"<center>Data in use</center>",type:"error",showConfirmButton:!1,allowOutsideClick:!0,html:!0}):(a.draw(),swal({title:"Deleted!",text:"<center>Data Deleted</center>",type:"success",timer:1e3,showConfirmButton:!1,html:!0}))},error:function(e){}})},500)})})});